<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Marios Zindilis - Mutagen ID3 Python Library</title>
  <meta name="description" content="Mutagen is a Python module to handle audio metadata.">

  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css"
    integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/static/css/zindilis.com.css">
  <link rel="canonical" href="https://zindilis.com/docs/mutagen.html">
  <link rel="alternate" type="application/rss+xml" title="Marios Zindilis" href="https://zindilis.com/feed.xml">
  
  <meta property="og:title" content="Mutagen ID3 Python Library">


  <meta property="og:type" content="article">

  <meta property="og:article:published_time" content="2015-12-12">


  
    <meta property="og:article:modified_time" content="2015-12-12">
  





</head>


<body>
  <header class="site-header">
  <nav class="navbar navbar-fixed-top" style="border-bottom: 1px solid; background-color: white;">
    <div class="container">
      <a class="navbar-brand fload-md-left float-xs-none" href="/">Marios Zindilis</a>
      <ul class="nav navbar-nav float-md-right">
        <li class="nav-item">
          <a class="nav-link" href="/docs/">Docs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/projects/">Projects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about/">About</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <div class="container">
        <article itemscope itemtype="http://schema.org/Article">

  <header>
    <h1 itemprop="name headline">Mutagen ID3 Python Library</h1>
  </header>

  <section itemprop="articleBody">
    <p><strong>Mutagen</strong> is a Python module to handle audio metadata.</p>

<h2 id="ufid-unique-file-identifier">UFID: Unique File Identifier</h2>

<p>The unique file identifier is a reference to an external database that may 
contain more information about the work tagged with it. Like many ID3 tags, it 
can have multiple values. For example, you can link the song “<em>Black Sabbath</em>” 
by “Black Sabbath” as <code class="highlighter-rouge">mt0030286828</code> in <a href="http://www.allmusic.com/" title="AllMusic">AllMusic</a>, and as 
<code class="highlighter-rouge">153a3596-af03-36ed-976a-83fec8745732</code> in <a href="https://musicbrainz.org/" title="MusicBrainz">MusicBrainz</a>.</p>

<p>Note that according to the <a href="http://id3.org/id3v2.4.0-frames">definition of the UFID ID3 frame</a>, the URLs 
should not be queries themselves. I guess that it might be a feature of the
software that reads this tag to transform it to direct links. In the example
used, those links would be:
<a href="http://www.allmusic.com/song/black-sabbath-mt0030286828">http://www.allmusic.com/song/black-sabbath-mt0030286828</a> and
<a href="https://musicbrainz.org/work/153a3596-af03-36ed-976a-83fec8745732">https://musicbrainz.org/work/153a3596-af03-36ed-976a-83fec8745732</a>.</p>

<p>Let’s see how to write UFID and read it back in Python, with Mutagen.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">mutagen</span> <span class="kn">import</span> <span class="n">id3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">song</span> <span class="o">=</span> <span class="n">id3</span><span class="o">.</span><span class="n">ID3</span><span class="p">(</span><span class="s">'test.mp3'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># Note that there is no `UFID` tag in the beginning:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">song</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">dict_keys</span><span class="p">([</span><span class="s">'TPE1'</span><span class="p">,</span> <span class="s">'TALB'</span><span class="p">,</span> <span class="s">'APIC:'</span><span class="p">,</span> <span class="s">'TDRC'</span><span class="p">,</span> <span class="s">'TRCK'</span><span class="p">,</span> <span class="s">'TPE2'</span><span class="p">,</span> <span class="s">'TPOS'</span><span class="p">,</span> <span class="s">'TIT2'</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># Let's add two references:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">am_url</span> <span class="o">=</span> <span class="s">'http://www.allmusic.com/'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">am_ref</span> <span class="o">=</span> <span class="s">'mt0030286828'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">mb_url</span> <span class="o">=</span> <span class="s">'https://musicbrainz.org/'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">mb_ref</span> <span class="o">=</span> <span class="s">'153a3596-af03-36ed-976a-83fec8745732'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">song</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">id3</span><span class="o">.</span><span class="n">UFID</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">am_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">am_ref</span><span class="o">.</span><span class="n">encode</span><span class="p">()))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">song</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">id3</span><span class="o">.</span><span class="n">UFID</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">mb_url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mb_ref</span><span class="o">.</span><span class="n">encode</span><span class="p">()))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># There are now two UFIDs:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">song</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">dict_keys</span><span class="p">([</span><span class="s">'UFID:https://musicbrainz.org/'</span><span class="p">,</span> <span class="s">'TRCK'</span><span class="p">,</span> <span class="s">'TPE1'</span><span class="p">,</span> <span class="s">'UFID:http://www.allmusic.com/'</span><span class="p">,</span> <span class="s">'TPE2'</span><span class="p">,</span> <span class="s">'TALB'</span><span class="p">,</span> <span class="s">'TIT2'</span><span class="p">,</span> <span class="s">'APIC:'</span><span class="p">,</span> <span class="s">'TPOS'</span><span class="p">,</span> <span class="s">'TDRC'</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># Read them back:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">song</span><span class="p">[</span><span class="s">'UFID:https://musicbrainz.org/'</span><span class="p">]</span>
<span class="n">UFID</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="s">'https://musicbrainz.org/'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">b</span><span class="s">'153a3596-af03-36ed-976a-83fec8745732'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">song</span><span class="p">[</span><span class="s">'UFID:https://musicbrainz.org/'</span><span class="p">]</span><span class="o">.</span><span class="n">owner</span>
<span class="s">'https://musicbrainz.org/'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">song</span><span class="p">[</span><span class="s">'UFID:https://musicbrainz.org/'</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
<span class="n">b</span><span class="s">'153a3596-af03-36ed-976a-83fec8745732'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">song</span><span class="p">[</span><span class="s">'UFID:https://musicbrainz.org/'</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
<span class="s">'153a3596-af03-36ed-976a-83fec8745732'</span></code></pre></figure>

<p>Note the use of <code class="highlighter-rouge">encode()</code> and <code class="highlighter-rouge">decode()</code> methods of <code class="highlighter-rouge">unicode</code> used for the 
<code class="highlighter-rouge">data</code> part of the frame, as it expects its contents to be bytes.</p>

  </section>

  <footer id="post-footer">
  
    First Published: <time datetime="2015-12-12T00:00:00+00:00" itemprop="datePublished">2015-12-12</time>
  
  
    
      &middot; Last Modified: <time datetime="2015-12-12T00:00:00+00:00" itemprop="dateModified">2015-12-12</time>
    
  

  <span itemprop="author" itemscope itemtype="http://schema.org/Person">
  
    &middot; Author: <span itemprop="name">Marios Zindilis</span>
  
  </span>
  </footer>
</article>

  </div>

  <footer id="site-footer" class="footer-distributed">
  <div class="container">
    <div class="footer-right">
      <a href="/feed.xml" title="Marios Zindilis RSS Feed">
        <i class="fa fa-rss" aria-hidden="true"></i><span class="sr-only">Marios Zindilis RSS Feed</span></a>
      <a href="https://www.facebook.com/zindilis" title="Marios Zindilis Facebook">
        <i class="fa fa-facebook" aria-hidden="true"></i><span class="sr-only">Marios Zindilis Facebook</span></a>
      <a href="https://twitter.com/MariosZindilis" title="Marios Zindilis Twitter">
        <i class="fa fa-twitter" aria-hidden="true"></i><span class="sr-only">Marios Zindilis Twitter</span></a>
      <a href="https://www.linkedin.com/in/zindilis" title="Marios Zindilis LinkedIn Profile">
        <i class="fa fa-linkedin" aria-hidden="true"></i><span class="sr-only">Marios Zindilis LinkedIn Profile</span></a>
      <a href="https://github.com/marios-zindilis" title="Marios Zindilis GitHub Page">
        <i class="fa fa-github" aria-hidden="true"></i><span class="sr-only">Marios Zindilis GitHub Page</span></a>
    </div>

    <div class="footer-left">
      <p class="footer-links">
        <a href="/">Home</a> · 
        <a href="/docs/">Docs</a> ·
        <a href="/projects/">Projects</a> ·
        <a href="/about/">About</a>
      </p>
      <p>Marios Zindilis</p>
    </div>
  </div>
</footer>

      <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"
      integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7"
      crossorigin="anonymous"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js"
      integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8"
      crossorigin="anonymous"></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js"
      integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK"
      crossorigin="anonymous"></script>
    <script type="text/javascript">
      // set padding-bottom of body to height of footer.site-footer:
      document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      // http://stackoverflow.com/a/14570614
      var observeDOM = (function(){
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver,
          eventListenerSupported = window.addEventListener;

        return function(obj, callback){
          if( MutationObserver ){
          // define a new observer
            var obs = new MutationObserver(function(mutations, observer){
              if( mutations[0].addedNodes.length || mutations[0].removedNodes.length )
              callback();
            });
            // have the observer observe foo for changes in children
            obs.observe( obj, { childList:true, subtree:true });
          }
          else if( eventListenerSupported ){
            obj.addEventListener('DOMNodeInserted', callback, false);
            obj.addEventListener('DOMNodeRemoved', callback, false);
          }
        }
      })();
      observeDOM(document.getElementById('site-footer') ,function(){
        document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      });
    </script>


  </body>
</html>
