<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Marios Zindilis - mysqlhotcopy</title>
  <meta name="description" content="mysqlhotcopy is a Perl script for backing up MySQL tables stored in either the MyISAM or ARCHIVE engines. It works very fast because it doesn&#39;t dump the ...">
  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
    integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/static/css/zindilis.com.css">
  <link rel="canonical" href="https://zindilis.com/docs/mysql/mysqlhotcopy.html">
  <link rel="alternate" type="application/rss+xml" title="Marios Zindilis" href="https://zindilis.com/feed.xml">
  
  <meta property="og:title" content="mysqlhotcopy">


  <meta property="og:type" content="article">


  





</head>


<body>
  <header class="mb-4">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="/">Marios Zindilis</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-link-items" aria-controls="navbar-link-items" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbar-link-items">
        <div class="navbar-nav ml-auto">
          <a class="nav-item nav-link" style="color:white" href="/docs/">Docs</a>
          <a class="nav-item nav-link" style="color:white" href="/projects/">Projects</a>
          <a class="nav-item nav-link" style="color:white" href="/about/">About</a>
        </div>
      </div>
    </div>
  </nav>
</header>


  <div class="container">
        <article itemscope itemtype="http://schema.org/Article">

  <header>
    <h1 itemprop="name headline">mysqlhotcopy</h1>
  </header>

  <section itemprop="articleBody">
    <p><strong>mysqlhotcopy</strong> is a Perl script for backing up MySQL tables stored in either 
the MyISAM or ARCHIVE engines. It works very fast because it doesn&#39;t dump the 
contents of the tables. Instead it takes advantage of the fact that MyISAM 
tables are contained in separate files, and simply locks the tables and copies 
the flat files.</p>

<h2>Example Setup</h2>

<ol>
<li><p>Create a user in MySQL for running <code>mysqlhotcopy</code>. The user will need to be 
granted the <code>SELECT</code>, <code>RELOAD</code> and <code>LOCK TABLES</code> privileges on the
databases that will be backed up. In this example, I want all databases to 
be backed up:</p>
<div class="highlight"><pre><code class="language-" data-lang="">mysql&gt; CREATE USER `mysqlhotcopy`;
mysql&gt; GRANT SELECT, RELOAD, LOCK TABLES ON *.* TO `mysqlhotcopy`@`localhost`;
</code></pre></div></li>
<li><p>Create a daily cron job to backup every database, except for 
<code>information_schema</code>, which is a dynamic schema created my the MySQL server 
itself and does not exist as files on the filesystem. An example script is:</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="c">#!/bin/bash</span>

<span class="k">for </span>database <span class="k">in</span> <span class="k">$(</span>mysql --user mysqlhotcopy           <span class="se">\</span>
                        --batch                       <span class="se">\</span>
                        --skip-column-names           <span class="se">\</span>
                        --execute <span class="s1">'SHOW DATABASES;'</span> | <span class="se">\</span>
                  grep -v <span class="s1">'^information_schema$'</span><span class="k">)</span>
<span class="k">do
    </span>mysqlhotcopy <span class="nv">$database</span> /root/mysql-dumps/ --allowold --keepold --user<span class="o">=</span>mysqlhotcopy
<span class="k">done</span>
</code></pre></div>
<p>This script maintains one previous copy of the databases, by renaming the 
directory, appending the suffix <code>_old</code> to the name. </p></li>
</ol>

<h2>See also</h2>

<ul>
<li>  <a href="http://dev.mysql.com/doc/refman/5.6/en/mysqlhotcopy.html">mysqlhotcopy - A Database Backup Program</a></li>
</ul>

  </section>

  <footer id="post-footer">
  
  
    
  

  <span itemprop="author" itemscope itemtype="http://schema.org/Person">
  
    &middot; Author: <span itemprop="name">Marios Zindilis</span>
  
  </span>
  </footer>
</article>

  </div>

  <footer id="site-footer" class="footer-distributed">
  <div class="container">
    <div class="footer-right">
      <a href="/feed.xml" title="Marios Zindilis RSS Feed">
        <i class="fa fa-rss" aria-hidden="true"></i><span class="sr-only">Marios Zindilis RSS Feed</span></a>
      <a href="https://www.linkedin.com/in/zindilis" title="Marios Zindilis LinkedIn Profile">
        <i class="fa fa-linkedin" aria-hidden="true"></i><span class="sr-only">Marios Zindilis LinkedIn Profile</span></a>
      <a href="https://github.com/marios-zindilis" title="Marios Zindilis GitHub Page">
        <i class="fa fa-github" aria-hidden="true"></i><span class="sr-only">Marios Zindilis GitHub Page</span></a>
    </div>

    <div class="footer-left">
      <p class="footer-links">
        <a href="/">Home</a> · 
        <a href="/docs/">Docs</a> ·
        <a href="/projects/">Projects</a> ·
        <a href="/about/">About</a>
      </p>
      <p>Marios Zindilis</p>
    </div>
  </div>
</footer>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <script type="text/javascript">
      // set padding-bottom of body to height of footer.site-footer:
      document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      // http://stackoverflow.com/a/14570614
      var observeDOM = (function(){
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver,
          eventListenerSupported = window.addEventListener;

        return function(obj, callback){
          if( MutationObserver ){
          // define a new observer
            var obs = new MutationObserver(function(mutations, observer){
              if( mutations[0].addedNodes.length || mutations[0].removedNodes.length )
              callback();
            });
            // have the observer observe foo for changes in children
            obs.observe( obj, { childList:true, subtree:true });
          }
          else if( eventListenerSupported ){
            obj.addEventListener('DOMNodeInserted', callback, false);
            obj.addEventListener('DOMNodeRemoved', callback, false);
          }
        }
      })();
      observeDOM(document.getElementById('site-footer') ,function(){
        document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      });
    </script>


  </body>
</html>
