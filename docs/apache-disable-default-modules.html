<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Marios Zindilis - Disabling Apache Default Modules</title>
  <meta name="description" content="With a default installation of Apache running, a set of modules are configured to load automatically, to serve what the server’s and the distribution’s devel...">

  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css"
    integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/static/css/zindilis.com.css">
  <link rel="canonical" href="https://zindilis.com/docs/apache-disable-default-modules.html">
  <link rel="alternate" type="application/rss+xml" title="Marios Zindilis" href="https://zindilis.com/feed.xml">
  
  <meta property="og:title" content="Disabling Apache Default Modules">


  <meta property="og:type" content="article">


  




  <meta property="og:description" content="Which default Apache modules can be disabled">


</head>


<body style="padding-top:5rem;">
  <header class="site-header">
  <nav class="navbar navbar-fixed-top" style="border-bottom: 1px solid; background-color: white;">
    <div class="container">
      <a class="navbar-brand fload-md-left float-xs-none" href="/">Marios Zindilis</a>
      <ul class="nav navbar-nav float-md-right">
        <li class="nav-item">
          <a class="nav-link" href="/docs/">Docs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/projects/">Projects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about/">About</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <div class="container">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Disabling Apache Default Modules</h1>
  </header>

  <div class="post-content">
    <p>With a default installation of Apache running, a set of modules are configured 
to load automatically, to serve what the server’s and the distribution’s 
developers evaluated to be the most common needs. These modules can be (and 
probably should be) disabled on a production web server. This might save a very 
tiny bit of memory for each module, and also can improve security, in case a 
vulnerability exists in one of the loaded but unused modules.</p>

<p>In fact, if you want to be paranoid about security, you can pretty much disable 
all Apache modules, and only selectively enable those that are required for the 
functionality that you want your server to have.</p>

<p>In CentOS, you can see which modules are loaded on a running instance of 
Apache, with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>httpd -M
</code></pre>
</div>

<h2 id="modproxy-and-related-proxy-modules"><code class="highlighter-rouge">mod_proxy</code> and related proxy modules</h2>

<p>The <code class="highlighter-rouge">mod_proxy</code> and its related modules add the capability to use Apache as a 
proxy server in front of other Web servers, as well as in front of FTP servers, 
application servers, FastCGI servers, and other types of servers specified by 
loading additional modules.</p>

<p>These are not necessary in a setup where Apache is used as a standalone Web 
server. You can disable these features by commenting out the lines:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    LoadModule proxy_module modules/mod_proxy.so
    LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
    LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
    LoadModule proxy_http_module modules/mod_proxy_http.so
    LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
    LoadModule proxy_connect_module modules/mod_proxy_connect.so
</code></pre>
</div>

<p>The <code class="highlighter-rouge">mod_proxy_ajp</code> module provides the ability to proxy HTTP requests 
coming to the web server to an application server. It is commonly used 
together with Apache Tomcat. Read more about the <a href="http://httpd.apache.org/docs/current/mod/mod_proxy_ajp.html">Apache Module <code class="highlighter-rouge">mod_proxy_ajp</code></a>.</p>

<h2 id="modsubstitute"><code class="highlighter-rouge">mod_substitute</code></h2>

<p>The <code class="highlighter-rouge">substitute</code> module allows for sed-like regex-based string substitutions in 
HTTP responses. To disable it, comment out the line:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>LoadModule substitute_module modules/mod_substitute.so
</code></pre>
</div>

<p>Read more about the <a href="http://httpd.apache.org/docs/current/mod/mod_substitute.html">Apache Module <code class="highlighter-rouge">mod_substitute</code></a></p>

<h2 id="moduserdir"><code class="highlighter-rouge">mod_userdir</code></h2>

<p>Module <code class="highlighter-rouge">userdir</code> is used to serve web content from inside users’ home 
directories, and it is loaded but deactivated (with the <code class="highlighter-rouge">UserDir disabled</code> 
directive) by default on CentOS 6. To unload it permanently, edit 
<code class="highlighter-rouge">/etc/httpd/conf/httpd.conf</code>, and comment out the line:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    LoadModule userdir_module modules/mod_userdir.so
</code></pre>
</div>

<p>You might also comment out the lines in the same file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    &lt;IfModule mod_userdir.c&gt;
        UserDir disabled
    &lt;/IfModule&gt;
</code></pre>
</div>

<h2 id="moddav-and-moddavfs"><code class="highlighter-rouge">mod_dav</code> and <code class="highlighter-rouge">mod_dav_fs</code></h2>

<p>Both of these modules provide support for <a href="http://www.webdav.org/">WebDav</a> and 
can be disabled if WebDav is not going to be used in production. To disable, 
comment out the lines:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    LoadModule dav_module modules/mod_dav.so
    LoadModule dav_fs_module modules/mod_dav_fs.so
</code></pre>
</div>

<p>You might also comment out the lines in the same file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    &lt;IfModule mod_dav_fs.c&gt;
        DAVLockDB /var/lib/dav/lockdb
    &lt;/IfModule&gt;
</code></pre>
</div>

<h2 id="modspeling"><code class="highlighter-rouge">mod_speling</code></h2>

<p>The <code class="highlighter-rouge">speling</code> module tries to guess if a visitor has misspelled the URL of a 
page, and returns the page anyway if the requested misspelled page name and the 
actual page name are close enought. To disable it, comment out the line:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    LoadModule speling_module modules/mod_speling.so
</code></pre>
</div>

<p>Read more about the <a href="https://httpd.apache.org/docs/current/mod/mod_speling.html">Apache <code class="highlighter-rouge">speling</code> module</a></p>

<h2 id="modversion"><code class="highlighter-rouge">mod_version</code></h2>

<p>The <code class="highlighter-rouge">version</code> module allows you to specify different configuration depending on 
the version of Apache that is running, by defining that configuration inside 
<code class="highlighter-rouge">&lt;IfVersion&gt;</code> blocks of code. This makes it possible to have the same basic 
configuration file for many servers, which can be useful to some organizations. 
To disable this feature, commend out the line:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    LoadModule version_module modules/mod_version.so
</code></pre>
</div>

<h2 id="authentication-and-authorization-modules">Authentication and authorization modules</h2>

<p>Apache provides a few ways to handle user authentication (who can do something) 
and authorization (what they can do). This functionality is provided by modules 
that contain <code class="highlighter-rouge">authn</code> or <code class="highlighter-rouge">authz</code> in their names, repsectively. If you don’t plan 
on delegating these features to Apache at all, you can disable all related 
modules:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">mod_ldap</code> and <code class="highlighter-rouge">mod_authnz_ldap</code>: These two modules can be used to delegate 
 authentication to an LDAP directory. To disable, comment out these lines:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>LoadModule ldap_module modules/mod_ldap.so
LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
</code></pre>
    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">mod_auth_basic</code> and <code class="highlighter-rouge">mod_auth_digest</code> offer Basic or Digest authentication 
respectively, and are used in combination with <code class="highlighter-rouge">mod_authn_file</code> (which 
allows the definition of a file that contains user credentials, and makes 
the use of the <code class="highlighter-rouge">htpasswd</code> command possible),<code class="highlighter-rouge">mod_authz_user</code> (which allows 
for different access in different parts of a website, and makes the use of 
the <code class="highlighter-rouge">Require</code> directive possible), and <code class="highlighter-rouge">mod_authz_groupfile</code> (which allows 
for access to be restricted based on group membership, usually defined in a 
<code class="highlighter-rouge">htgroup</code> file). Also, <code class="highlighter-rouge">mod_authn_default</code> and <code class="highlighter-rouge">mod_authz_default</code> are used 
to reject credentials if authentication or authorization are enabled but 
not configured. To disable, comment out these lines:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_default_module modules/mod_authz_default.so
</code></pre>
    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">mod_authn_alias</code> allows you to create multiple Basic authentication 
providers, and give them names (aliases) that are then used in the rest of 
the configuration. To disable, comment out:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>LoadModule authn_anon_module modules/mod_authn_anon.so
</code></pre>
    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">mod_authn_anon</code> allows anonymous users to access an otherwise restricted 
website. In combination with some authorization modules, it can display 
different content to authenticated and anonymous users. To disable, comment 
out:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>LoadModule authn_anon_module modules/mod_authn_anon.so
</code></pre>
    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">mod_authn_dbm</code> is an alternative to using an <code class="highlighter-rouge">htpasswd</code> file as the users’ 
database, and scales better when the number of users exceeds 200. To 
disable, comment out:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>LoadModule authn_dbm_module modules/mod_authn_dbm.so
</code></pre>
    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">mod_authz_host</code> allows restriction of access based on miscellaneous 
properties of the client, as those are capture in Apache’s environment 
variables, the most common of which are the IP and/or hostname of the 
client, and the web request sent by it. Access is controlled with the 
<code class="highlighter-rouge">Allow</code> and <code class="highlighter-rouge">Deny</code> directives, and the order of application is controlled 
with the <code class="highlighter-rouge">Order</code> directive. To disable, comment out:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>LoadModule authz_host_module modules/mod_authz_host.so
</code></pre>
    </div>

    <p>If you disable this module, you will also have to comment out any uses of 
the combination <code class="highlighter-rouge">Order</code>, <code class="highlighter-rouge">Allow</code> and <code class="highlighter-rouge">Deny</code> in your configuration, since 
Apache will no longer understand their meaning. Running either <code class="highlighter-rouge">httpd -t</code> 
or <code class="highlighter-rouge">service httpd configtest</code> after commenting out the module will tell you 
the instances of those directives.</p>

    <p>Note that one of the uses of <code class="highlighter-rouge">mod_authz_host</code> is to disallow clients from 
reading <code class="highlighter-rouge">.htaccess</code> files. If you disable this module, you will either need 
to replace the instructions in <code class="highlighter-rouge">.htaccess</code> files with configuration inside 
the main <code class="highlighter-rouge">httpd.conf</code>, or to find another way to make those files 
unreadable.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">mod_authz_owner</code> will authorize access to a user by comparing the username 
provided to either Basic or Digest authentication with the ownership of the 
file requested on the underlying filesystem. To disable, comment out:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>LoadModule authz_owner_module modules/mod_authz_owner.so
</code></pre>
    </div>
  </li>
</ul>

  </div>

</article>

  </div>

  <!--footer id="site-footer">
  <div class="container">


  </div>
</footer-->

<footer id="site-footer" class="footer-distributed">
  <div class="container">
            <div class="footer-right">
                <a href="/feed.xml"><i class="fa fa-rss"></i></a>
                <a href="https://www.facebook.com/zindilis"><i class="fa fa-facebook"></i></a>
                <a href="https://twitter.com/MariosZindilis"><i class="fa fa-twitter"></i></a>
                <a href="https://www.linkedin.com/in/zindilis"><i class="fa fa-linkedin"></i></a>
                <a href="https://github.com/marios-zindilis"><i class="fa fa-github"></i></a>
            </div>

            <div class="footer-left">
                <p class="footer-links">
                    <a href="/">Home</a> · 
                    <a href="/docs/">Docs</a> ·
                    <a href="/projects/">Projects</a> ·
                    <a href="/about/">About</a>
                </p>
                <p>Marios Zindilis</p>
            </div>
  </div>
</footer>

      <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"
      integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7"
      crossorigin="anonymous"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js"
      integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8"
      crossorigin="anonymous"></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js"
      integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK"
      crossorigin="anonymous"></script>
    <script type="text/javascript">
      // set padding-bottom of body to height of footer.site-footer:
      document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      // http://stackoverflow.com/a/14570614
      var observeDOM = (function(){
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver,
          eventListenerSupported = window.addEventListener;

        return function(obj, callback){
          if( MutationObserver ){
          // define a new observer
            var obs = new MutationObserver(function(mutations, observer){
              if( mutations[0].addedNodes.length || mutations[0].removedNodes.length )
              callback();
            });
            // have the observer observe foo for changes in children
            obs.observe( obj, { childList:true, subtree:true });
          }
          else if( eventListenerSupported ){
            obj.addEventListener('DOMNodeInserted', callback, false);
            obj.addEventListener('DOMNodeRemoved', callback, false);
          }
        }
      })();
      observeDOM(document.getElementById('site-footer') ,function(){
        document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      });
    </script>


  </body>
</html>
