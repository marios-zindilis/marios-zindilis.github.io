<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Marios Zindilis - Building VMware ESXi 4 Tools on CentOS 6</title>
  <meta name="description" content="CentOS 6 is not directly supported by version 4 of the VMware ESXi hypervisor, which means that there are no precompiled binaries for the kernel modules requ...">

  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css"
    integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/static/css/zindilis.com.css">
  <link rel="canonical" href="https://zindilis.com/docs/vmware/build-vmware-4-tools-on-centos-6.html">
  <link rel="alternate" type="application/rss+xml" title="Marios Zindilis" href="https://zindilis.com/feed.xml">
  
  <meta property="og:title" content="Building VMware ESXi 4 Tools on CentOS 6">


  <meta property="og:type" content="article">


  





</head>


<body>
  <header class="site-header">
  <nav class="navbar navbar-fixed-top" style="border-bottom: 1px solid; background-color: white;">
    <div class="container">
      <a class="navbar-brand fload-md-left float-xs-none" href="/">Marios Zindilis</a>
      <ul class="nav navbar-nav float-md-right">
        <li class="nav-item">
          <a class="nav-link" href="/docs/">Docs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/projects/">Projects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about/">About</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <div class="container">
        <article itemscope itemtype="http://schema.org/Article">

  <header>
    <h1 itemprop="name headline">Building VMware ESXi 4 Tools on CentOS 6</h1>
  </header>

  <section itemprop="articleBody">
    <p>CentOS 6 is not directly supported by version 4 of the VMware ESXi hypervisor, 
which means that there are no precompiled binaries for the kernel modules 
required for the VM to talk to the host. This short guide shows you how to 
manually compile the tools. Note that every time that you upgrade to a newer 
kernel version, you will have to do this from scratch – you will have to 
compile the tools against the new kernel’s headers.</p>

<p>Here’s the procedure:</p>

<ol>
  <li>
    <p>From the vSphere client, right click on the machine, open the “Guest” menu 
and select “Install/Upgrade VMware Tools”. This will insert a virtual 
optical drive in the VM.</p>
  </li>
  <li>
    <p>Mount the virtual optical drive, <em>not</em> directly on the <code class="highlighter-rouge">/mnt</code> directory, 
since that will be used later by the installer. For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>mkdir /mnt/vmware-tools
mount -o loop /dev/cdrom /mnt/vmware-tools
</code></pre>
    </div>
  </li>
  <li>
    <p>Copy the tools in a writeable location (the mount point of the virtual 
optical drive will be read-only) and decompress it. For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>cp /mnt/vmware-tools/VMwareTools-4*.tar.gz /root/
cd /root/
tar zxvf VMwareTools-4*.tar.gz
</code></pre>
    </div>
  </li>
  <li>
    <p>Before starting the installation, install a C compiler and the kernel’s 
source code, since the VMware tools installer will need the kernel headers 
to include while compiling the modules. For example:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>yum install gcc
yum install kernel-headers
</code></pre>
    </div>
  </li>
  <li>
    <p>Next, start the installation. It will ask a lot of questions, on which you 
can (most probably) accept the default answers.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>cd /root/vmware-tools-distrib
./vmware-install.pl
</code></pre>
    </div>
  </li>
  <li>
    <p>Finally, even though you don’t normally need to reboot, do it anyway if you 
can. That way you will verify that the kernel modules are properly loaded 
after a reboot. You can check that with:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>[root@centos-6 ~]# lsmod | grep '^vm'
vmmemctl                8642  0 
vmware_balloon          7199  0 
</code></pre>
    </div>
  </li>
  <li>
    <p>If everything went fine, you might want to clean up the files you copied 
and extracted, although keeping them will speed up the reinstallation of 
the tools in case you upgrade the kernel to a newer version.</p>
  </li>
</ol>

  </section>

  <footer id="post-footer">
  
  
    
  

  <span itemprop="author" itemscope itemtype="http://schema.org/Person">
  
    &middot; Author: <span itemprop="name">Marios Zindilis</span>
  
  </span>
  </footer>
</article>

  </div>

  <footer id="site-footer" class="footer-distributed">
  <div class="container">
    <div class="footer-right">
      <a href="/feed.xml" title="Marios Zindilis RSS Feed"><i class="fa fa-rss"  title="Marios Zindilis RSS Feed"></i></a>
      <a href="https://www.facebook.com/zindilis" title="Marios Zindilis Facebook"><i class="fa fa-facebook" title="Marios Zindilis Facebook"></i></a>
      <a href="https://twitter.com/MariosZindilis" title="Marios Zindilis Twitter"><i class="fa fa-twitter" title="Marios Zindilis Twitter"></i></a>
      <a href="https://www.linkedin.com/in/zindilis" title="Marios Zindilis LinkedIn Profile"><i class="fa fa-linkedin" title="Marios Zindilis LinkedIn Profile"></i></a>
      <a href="https://github.com/marios-zindilis" title="Marios Zindilis GitHub Page"><i class="fa fa-github" title="Marios Zindilis GitHub Page"></i></a>
    </div>

    <div class="footer-left">
      <p class="footer-links">
        <a href="/">Home</a> · 
        <a href="/docs/">Docs</a> ·
        <a href="/projects/">Projects</a> ·
        <a href="/about/">About</a>
      </p>
      <p>Marios Zindilis</p>
    </div>
  </div>
</footer>

      <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"
      integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7"
      crossorigin="anonymous"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js"
      integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8"
      crossorigin="anonymous"></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js"
      integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK"
      crossorigin="anonymous"></script>
    <script type="text/javascript">
      // set padding-bottom of body to height of footer.site-footer:
      document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      // http://stackoverflow.com/a/14570614
      var observeDOM = (function(){
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver,
          eventListenerSupported = window.addEventListener;

        return function(obj, callback){
          if( MutationObserver ){
          // define a new observer
            var obs = new MutationObserver(function(mutations, observer){
              if( mutations[0].addedNodes.length || mutations[0].removedNodes.length )
              callback();
            });
            // have the observer observe foo for changes in children
            obs.observe( obj, { childList:true, subtree:true });
          }
          else if( eventListenerSupported ){
            obj.addEventListener('DOMNodeInserted', callback, false);
            obj.addEventListener('DOMNodeRemoved', callback, false);
          }
        }
      })();
      observeDOM(document.getElementById('site-footer') ,function(){
        document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      });
    </script>


  </body>
</html>
