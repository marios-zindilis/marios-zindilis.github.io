<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Marios Zindilis - openDCIM 2.1 Installation on Centos 6</title>
  <meta name="description" content="This is a bottom-up guide for installing [openDCIM](/docs/opendcim.html) on a system running CentOS 6.x.">
  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"
    integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/static/css/zindilis.com.css">
  <link rel="canonical" href="https://zindilis.com/docs/centos-6-install-opendcim-2.1.html">
  <link rel="alternate" type="application/rss+xml" title="Marios Zindilis" href="https://zindilis.com/feed.xml">
  
  <meta property="og:title" content="openDCIM 2.1 Installation on Centos 6">


  <meta property="og:type" content="article">

  <meta property="og:article:published_time" content="2013-05-25">


  <meta property="og:article:modified_time" content="2015-03-26">





</head>


<body>
  <header class="mb-4">
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="/">Marios Zindilis</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-link-items" aria-controls="navbar-link-items" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbar-link-items">
        <div class="navbar-nav ml-auto">
          <a class="nav-item nav-link" style="color:white" href="/docs/">Docs</a>
          <a class="nav-item nav-link" style="color:white" href="/projects/">Projects</a>
          <a class="nav-item nav-link" style="color:white" href="/about/">About</a>
        </div>
      </div>
    </div>
  </nav>
</header>


  <div class="container">
        <article itemscope itemtype="http://schema.org/Article">

  <header>
    <h1 itemprop="name headline">openDCIM 2.1 Installation on Centos 6</h1>
  </header>

  <section itemprop="articleBody">
    <p class="lead">This is a bottom-up guide for installing 
[openDCIM](/docs/opendcim.html) on a system running CentOS 6.x.</p>

<p>This guide is released in the <strong>Public Domain</strong>, except from the section 
&quot;<em>Enable HTTPS</em>&quot; which is a snippet from <a href="http://wiki.centos.org/HowTos/Https">CentOS Wiki</a> 
and is licenced under <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-Share Alike 3.0 Unported License</a>.</p>

<h2>Software Used</h2>

<p>This guide has been tested with:</p>

<ul>
<li>  openDCIM version 2.1, the current version as of the writing of the 
guide, but it should apply to previous versions, and possibly to 
future ones as well. </li>
<li>  CentOS 6.4 Minimal 64bit, with the latest updates as of 2013-05-25, 
but it should apply to previous versions, and possibly to future 
ones as well.</li>
<li>  The <code>vim</code> editor is used in the commands below, because it adds nice 
colored syntax highlighting when editing configuration files. If you 
don&#39;t have <code>vim</code>, you can use <code>vi</code>, which comes preinstalled with 
CentOS, or any text editor of your choice.</li>
</ul>

<h2>Install Apache, PHP, MySQL</h2>

<p>Install, start and enable Apache:</p>
<div class="highlight"><pre><code class="language-" data-lang="">yum -y install httpd
service httpd start
chkconfig httpd on
</code></pre></div>
<p>Install PHP, and the MBSTRING module required for internationalization:</p>
<div class="highlight"><pre><code class="language-" data-lang="">yum -y install php
yum -y install php-mysql
yum -y install php-mbstring
</code></pre></div>
<p>Install, start and enable MySQL Server:</p>
<div class="highlight"><pre><code class="language-" data-lang="">yum -y install mysql-server
service mysqld start
chkconfig mysqld on
</code></pre></div>
<p>Secure MySQL Server:</p>
<div class="highlight"><pre><code class="language-" data-lang="">mysql_secure_installation
</code></pre></div>
<p>During this step, you will:</p>

<ol>
<li>Set a root password</li>
<li>Remove anonymous users</li>
<li>Disallow root login remotely</li>
<li>Remove test database and access to it</li>
<li>Reload privilege tables</li>
</ol>

<p>Create a database for openDCIM (change the database name <code>dcim</code> and the 
password <code>dcimpassword</code> to something that suits you):</p>
<div class="highlight"><pre><code class="language-" data-lang="">mysql -u root -p
mysql&gt; create database dcim;
mysql&gt; grant all privileges on dcim.* to 'dcim'@'localhost' identified by 'dcimpassword';
</code></pre></div>
<h2>Enable HTTPS</h2>

<p>Install Apache SSL Module:</p>
<div class="highlight"><pre><code class="language-" data-lang="">yum -y install mod_ssl
</code></pre></div>
<p>Generate the necessary keys and copy them to the proper directories:</p>
<div class="highlight"><pre><code class="language-" data-lang="">cd /root
openssl genrsa -out ca.key 1024 
openssl req -new -key ca.key -out ca.csr
openssl x509 -req -days 365 -in ca.csr -signkey ca.key -out ca.crt
cp ca.crt /etc/pki/tls/certs
cp ca.key /etc/pki/tls/private/ca.key
cp ca.csr /etc/pki/tls/private/ca.csr
</code></pre></div>
<p>To let Apache know of the proper locations of the keys, edit 
<code>/etc/httpd/conf/httpd.conf</code>...</p>
<div class="highlight"><pre><code class="language-" data-lang="">vim +/SSLCertificateFile /etc/httpd/conf.d/ssl.conf
</code></pre></div>
<p>... comment out the line...</p>
<div class="highlight"><pre><code class="language-" data-lang="">SSLCertificateFile /etc/pki/tls/certs/localhost.crt
</code></pre></div>
<p>... and substitute with:</p>
<div class="highlight"><pre><code class="language-" data-lang="">SSLCertificateFile /etc/pki/tls/certs/ca.crt
</code></pre></div>
<p>Also comment out the line...</p>
<div class="highlight"><pre><code class="language-" data-lang="">SSLCertificateKeyFile /etc/pki/tls/private/localhost.key
</code></pre></div>
<p>... and substitute with:</p>
<div class="highlight"><pre><code class="language-" data-lang="">SSLCertificateKeyFile /etc/pki/tls/private/ca.key
</code></pre></div>
<p>To set the server name:</p>
<div class="highlight"><pre><code class="language-" data-lang="">vim +/ServerName /etc/httpd/conf/httpd.conf
</code></pre></div>
<p>Find the line...</p>
<div class="highlight"><pre><code class="language-" data-lang="">#ServerName www.example.com:80
</code></pre></div>
<p>...and add below it:</p>
<div class="highlight"><pre><code class="language-" data-lang="">ServerName opendcim.example.com:443
</code></pre></div>
<p>Finally restart Apache...</p>
<div class="highlight"><pre><code class="language-" data-lang="">service httpd restart
</code></pre></div>
<h2>Create a VirtualHost</h2>
<div class="highlight"><pre><code class="language-" data-lang="">vim +/NameVirtualHost /etc/httpd/conf/httpd.conf
</code></pre></div>
<p>Find the line:</p>
<div class="highlight"><pre><code class="language-" data-lang="">#NameVirtualHost *:80
</code></pre></div>
<p>... and add below it:</p>
<div class="highlight"><pre><code class="language-" data-lang="">NameVirtualHost *:443
</code></pre></div>
<p>Now create a new configuration file for the openDCIM VirtualHost...</p>

<p>vim /etc/httpd/conf.d/opendcim.example.com.conf</p>

<p>... add the lines...</p>
<div class="highlight"><pre><code class="language-" data-lang="">&lt;VirtualHost *:443&gt;
  ServerAdmin marios@zindilis.com
  DocumentRoot /var/www/opendcim
  ServerName opendcim.zindilis.net
  &lt;Directory /var/www/opendcim&gt;
    AuthType Basic
    AuthName "openDCIM"   
    AuthUserFile /var/www/.htpasswd
    Require valid-user
  &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre></div>
<h2>Enable User Authentication</h2>

<p>You have protected the openDCIM web directory with a requirement for 
Basic authentication, with the lines already added in your Apache 
configuration file above.</p>

<p>Now, to create at least on user, do:</p>
<div class="highlight"><pre><code class="language-" data-lang="">touch /var/www/.htpasswd
htpasswd /var/www/.htpasswd Administrator
</code></pre></div>
<p>You will be asked for a password for user &quot;Administrator&quot; twice.</p>

<h2>Open Web Access on Firewall</h2>

<p>The <code>iptables</code> firewall is enabled on CentOS by default, and blocks 
access to HTTPS port 443. To allow it...</p>
<div class="highlight"><pre><code class="language-" data-lang="">vim /etc/sysconfing/iptables
</code></pre></div>
<p>... find the line...</p>
<div class="highlight"><pre><code class="language-" data-lang="">-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT
</code></pre></div>
<p>...and add below it:</p>
<div class="highlight"><pre><code class="language-" data-lang="">-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT
</code></pre></div>
<p>Restart iptables:</p>
<div class="highlight"><pre><code class="language-" data-lang="">service iptables restart
</code></pre></div>
<h2>Download and Install openDCIM</h2>

<p>Download the latest version of openDCIM from <a href="http://www.opendcim.org/downloads.html">opendcim.com</a> 
(version 2.1 at the time of writing this guide):</p>
<div class="highlight"><pre><code class="language-" data-lang="">cd /var/www
curl -O http://www.opendcim.org/packages/openDCIM-2.1.tar.gz
</code></pre></div>
<p>Extract the archive and create a symbolic link:</p>
<div class="highlight"><pre><code class="language-" data-lang="">tar zxvf openDCIM-2.1.tar.gz
ln -s openDCIM-2.1 opendcim
</code></pre></div>
<p>The symbolic link is not required. If you don&#39;t want to create it, just 
rename the directory <code>openDCIM-2.1</code> to <code>opendcim</code>. However, having a 
symbolic link in place allows you to find out the version of openDCIM at 
a glance, and makes upgrades easier.</p>

<p>Now, prepare the configuration file for access to the database:</p>
<div class="highlight"><pre><code class="language-" data-lang="">cd /var/www/opendcim
cp db.inc.php-dist db.inc.php
vim db.inc.php
</code></pre></div>
<p>Edit the following lines, to reflect your settings of database host (in 
this example <code>localhost</code>), database name (<code>dcim</code>), and credentials that 
you assigned when creating the database:</p>
<div class="highlight"><pre><code class="language-" data-lang="">$dbhost = 'localhost';
$dbname = 'dcim';
$dbuser = 'dcim';
$dbpass = 'dcimpassword';
</code></pre></div>
<p>Finally, restart Apache one last time:</p>
<div class="highlight"><pre><code class="language-" data-lang="">service httpd restart
</code></pre></div>
<p>Now, you can open openDCIM in your browser to proceed with the 
installation. If you have set up a DNS entry for a domain name to point 
to your web server&#39;s IP, you will go to something similar to <code>https://opendcim.example.com/</code>. 
Otherwise, you can visit <code>https://IP_of_web_server/</code>. </p>

<p>In any case, you will be asked to accept the web server&#39;s HTTPS 
certificate. This will only happen once per browser. You will then be 
asked for the Authentication credentials that you configured earlier 
with <code>htpasswd</code>.</p>

<p>To finish with the installation, follow <a href="http://www.youtube.com/watch?v=XzEI6Z8yhRg">Scott Milliken&#39;s (lead 
developer) video tutorial on YouTube</a>, 
starting from minute 09:00. He will walk you through the first settings 
to get you started in the web interface.</p>

<h2>Additional Resources</h2>

<ul>
<li>  <a href="http://wiki.centos.org/HowTos/Https">How to setup HTTPS on CentOS</a></li>
<li>  <a href="http://www.youtube.com/watch?v=XzEI6Z8yhRg">openDCIM Installation Video Tutorial</a></li>
<li>  <a href="https://github.com/samilliken/openDCIM/blob/master/INSTALL">openDCIM INSTALL File on GitHub</a></li>
</ul>

  </section>

  <footer id="post-footer">
  
    First Published: <time datetime="2013-05-25T00:00:00+01:00" itemprop="datePublished">2013-05-25</time>
  
  
    &middot; Last Modified: <time datetime="2015-03-26T00:00:00+00:00" itemprop="dateModified">2015-03-26</time>
  

  <span itemprop="author" itemscope itemtype="http://schema.org/Person">
  
    &middot; Author: <span itemprop="name">Marios Zindilis</span>
  
  </span>
  </footer>
</article>

  </div>

  <footer id="site-footer" class="footer-distributed">
  <div class="container">
    <div class="footer-right">
      <a href="/feed.xml" title="Marios Zindilis RSS Feed">
        <i class="fa fa-rss" aria-hidden="true"></i><span class="sr-only">Marios Zindilis RSS Feed</span></a>
      <a href="https://www.linkedin.com/in/zindilis" title="Marios Zindilis LinkedIn Profile">
        <i class="fa fa-linkedin" aria-hidden="true"></i><span class="sr-only">Marios Zindilis LinkedIn Profile</span></a>
      <a href="https://github.com/marios-zindilis" title="Marios Zindilis GitHub Page">
        <i class="fa fa-github" aria-hidden="true"></i><span class="sr-only">Marios Zindilis GitHub Page</span></a>
    </div>

    <div class="footer-left">
      <p class="footer-links">
        <a href="/">Home</a> · 
        <a href="/docs/">Docs</a> ·
        <a href="/projects/">Projects</a> ·
        <a href="/about/">About</a>
      </p>
      <p>Marios Zindilis</p>
    </div>
  </div>
</footer>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <script type="text/javascript">
      // set padding-bottom of body to height of footer.site-footer:
      document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      // http://stackoverflow.com/a/14570614
      var observeDOM = (function(){
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver,
          eventListenerSupported = window.addEventListener;

        return function(obj, callback){
          if( MutationObserver ){
          // define a new observer
            var obs = new MutationObserver(function(mutations, observer){
              if( mutations[0].addedNodes.length || mutations[0].removedNodes.length )
              callback();
            });
            // have the observer observe foo for changes in children
            obs.observe( obj, { childList:true, subtree:true });
          }
          else if( eventListenerSupported ){
            obj.addEventListener('DOMNodeInserted', callback, false);
            obj.addEventListener('DOMNodeRemoved', callback, false);
          }
        }
      })();
      observeDOM(document.getElementById('site-footer') ,function(){
        document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      });
    </script>


  </body>
</html>
