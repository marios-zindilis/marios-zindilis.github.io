<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Marios Zindilis - Single-App Django Project Anatomy</title>
  <meta name="description" content="How to structure the code in Django project that only contains one app.">

  <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css"
    integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/static/css/zindilis.com.css">
  <link rel="canonical" href="https://zindilis.com/blog/2017/01/06/django-anatomy-for-single-app.html">
  <link rel="alternate" type="application/rss+xml" title="Marios Zindilis" href="https://zindilis.com/feed.xml">
  
  <meta property="og:title" content="Single-App Django Project Anatomy">


  <meta property="og:type" content="article">

  <meta property="og:article:published_time" content="2017-01-06">


  <meta property="og:article:modified_time" content="2017-01-10">


  <meta property="og:article:tag" content="django">



  <meta property="og:description" content="How to structure the code in Django project that only contains one app.">


</head>


<body>
  <header class="site-header">
  <nav class="navbar navbar-fixed-top" style="border-bottom: 1px solid; background-color: white;">
    <div class="container">
      <a class="navbar-brand fload-md-left float-xs-none" href="/">Marios Zindilis</a>
      <ul class="nav navbar-nav float-md-right">
        <li class="nav-item">
          <a class="nav-link" href="/docs/">Docs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/projects/">Projects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about/">About</a>
        </li>
      </ul>
    </div>
  </nav>
</header>


  <div class="container">
        <article itemscope itemtype="http://schema.org/BlogPosting">

  <header>
    <h1 itemprop="name headline">Single-App Django Project Anatomy</h1>
    <p class="post-meta">
      <time datetime="2017-01-06T00:00:00+00:00" itemprop="datePublished">2017-01-06</time>
      • <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Marios Zindilis</span></span>
    </p>
  </header>

  <section itemprop="articleBody">
    <p>I watched a talk from DjangoCon 2014 called <a href="https://www.youtube.com/watch?v=ajEDo1semzs" title="DjangoCon 2014 - Anatomy of a Django Project">Anatomy of a Django Project</a>,
in which <a href="http://mlavin.org/" title="Mark Lavin">Mark Lavin</a> examines the location of some of the files that are
automatically created by <code>django-admin startproject myproject</code> and by
<code>django-admin startapp myapp</code> (or <code>manage.py startapp myapp</code>, they are the
same thing). Two themes from that talk resonated with me:</p>

<ol>
<li><p><strong>Django projects are still Python code.</strong> Many people who use Django,
myself included, often forget that Django is still Python code. You can
move files around if you want, you can rename them, you can do whatever
you could do if your code was <em>not</em> a Django website, as long as modules
are still able to import one another when needed. This article show you
how to do something along those lines.</p></li>
<li><p><strong>Naming the project and the app for single-app projects kinda sucks.</strong>
Sometimes you want to create a single-app Django project. Perhaps you are
certain that your project will only ever contain one app, or maybe it is a
proof-of-concept thing that you&#39;re tinkering with. You start a boilerplate
project with <code>django-admin startproject something_awesome</code>, only to
discover that you can&#39;t name your app <code>something_awesome</code> because that
namespace is already occupied, in the form of a directory in which Django
holds some project-wide files. You then end up naming your app <code>core</code>, or
<code>common</code>, or <code>main</code>, or something that is not cool, and most importantly
it&#39;s not semantic. This articles shows you how to overcome this hurdle.</p></li>
</ol>

<h2>Anatomy of a Default Django Project</h2>

<p>Let&#39;s take a look at the file structure of a default Django project with one
app. To create one, do something like:</p>
<div class="highlight"><pre><code class="language-" data-lang="">django-admin startproject something_awesome
cd something_awesome
django-admin startapp core
</code></pre></div>
<p>Here&#39;s the file structure that Django created for you:</p>
<div class="highlight"><pre><code class="language-" data-lang="">$ tree
.
├── core
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py
│   ├── tests.py
│   └── views.py
├── manage.py
└── something_awesome
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py
</code></pre></div>
<p>You can see that the <code>something_awesome</code> directory is used to hold a few files,
those are project-wide files. You can&#39;t name your app <code>something_awesome</code>, so
you had to name it <code>core</code>.</p>

<h2>Simpler Structure for Single-App Projects</h2>

<p>Here&#39;s how to create a simpler structure, if you&#39;re only creating a single-app
website.</p>

<ol>
<li><p>Create the Django project:</p>
<div class="highlight"><pre><code class="language-" data-lang="">django-admin startproject something_awesome
cd something_awesome
</code></pre></div>
<p>This is the file structure after that command:</p>
<div class="highlight"><pre><code class="language-" data-lang="">$ tree
.
├── manage.py
└── something_awesome
    ├── __init__.py
    ├── settings.py
    ├── urls.py
    └── wsgi.py
</code></pre></div></li>
<li><p>Move everything from the <code>something_awesome</code> directory to the project root,
then remove that directory and <code>__init__.py</code>:</p>
<div class="highlight"><pre><code class="language-" data-lang="">mv something_awesome/* .
rmdir something_awesome
rm __init__.py
</code></pre></div>
<p>Here&#39;s the new structure:</p>
<div class="highlight"><pre><code class="language-" data-lang="">$ tree
.
├── manage.py
├── settings.py
├── urls.py
└── wsgi.py
</code></pre></div></li>
<li><p>Fix the location of <code>settings</code> in <code>manage.py</code>. Here&#39;s the diff: </p>
<div class="highlight"><pre><code class="language-diff" data-lang="diff"><span class="gd">--- manage.py-orig  2017-01-05 07:02:21.078737918 +0000
</span><span class="gi">+++ manage.py   2017-01-05 07:02:35.314857268 +0000
</span><span class="gu">@@ -3,7 +3,7 @@
</span> import sys

 if __name__ == "__main__":
<span class="gd">-    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "something_awesome.settings")
</span><span class="gi">+    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "settings")
</span>     try:
         from django.core.management import execute_from_command_line
     except ImportError:
</code></pre></div></li>
<li><p>Fix <code>settings.py</code>. Here&#39;s the diff:</p>
<div class="highlight"><pre><code class="language-diff" data-lang="diff"><span class="gd">--- settings.py-orig    2017-01-06 01:06:54.082362856 +0000
</span><span class="gi">+++ settings.py 2017-01-06 01:07:27.427015777 +0000
</span><span class="gu">@@ -49,7 +49,7 @@
</span>     'django.middleware.clickjacking.XFrameOptionsMiddleware',
 ]

<span class="gd">-ROOT_URLCONF = 'something_awesome.urls'
</span><span class="gi">+ROOT_URLCONF = 'urls'
</span>
 TEMPLATES = [
     {
<span class="gu">@@ -67,7 +67,7 @@
</span>     },
 ]

<span class="gd">-WSGI_APPLICATION = 'something_awesome.wsgi.application'
</span><span class="gi">+WSGI_APPLICATION = 'wsgi.application'
</span></code></pre></div>
<p>If you are using SQLite as the database, then by default the location of
the <code>sqlite</code> file will be in the parent directory of <code>settings.py</code>. Now
that <code>settings.py</code> is in the root directory of the project, you don&#39;t want
that anymore, you want the database file to be in the same directory as
<code>settings.py</code>. Change the definition of the <code>BASE_DIR</code> constant in your
<code>settings.py</code> from the default:</p>
<div class="highlight"><pre><code class="language-" data-lang="">BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
</code></pre></div>
<p>...to:</p>
<div class="highlight"><pre><code class="language-" data-lang="">BASE_DIR = os.path.dirname(os.path.abspath(__file__))
</code></pre></div></li>
<li><p>Fix <code>wsgi.py</code>. Here&#39;s the diff:</p>
<div class="highlight"><pre><code class="language-diff" data-lang="diff"><span class="gd">--- wsgi.py-orig    2017-01-06 01:09:38.145285387 +0000
</span><span class="gi">+++ wsgi.py 2017-01-06 01:09:56.393573270 +0000
</span><span class="gu">@@ -11,6 +11,6 @@
</span>
 from django.core.wsgi import get_wsgi_application

<span class="gd">-os.environ.setdefault("DJANGO_SETTINGS_MODULE", "something_awesome.settings")
</span><span class="gi">+os.environ.setdefault("DJANGO_SETTINGS_MODULE", "settings")
</span></code></pre></div></li>
<li><p>At this point you have a Django project with a <em>flat</em> file structure, with
no directory occupying the cool name that you came up with. You can now
create an app called whatever you want, e.g:</p>
<div class="highlight"><pre><code class="language-" data-lang="">./manage.py startapp something_awesome
</code></pre></div>
<p>Here&#39;s the new structure:</p>
<div class="highlight"><pre><code class="language-" data-lang="">$ tree
.
├── manage.py
├── settings.py
├── something_awesome
│   ├── admin.py
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py
│   ├── tests.py
│   └── views.py
├── urls.py
└── wsgi.py
</code></pre></div></li>
</ol>

<p>You can now get on with developing your application in this simpler setup.</p>

<h2>Final Thoughts</h2>

<p>As I mentioned in the beginning, never forget that Django is just Python code.
You, as the developer, have the power to manipulate it however you want. If you
are interested in this matter, check out the DjangoCon 
<a href="https://www.youtube.com/watch?v=ajEDo1semzs" title="DjangoCon 2014 - Anatomy of a Django Project">Anatomy of a Django Project</a> talk on Youtube.</p>

  </section>

  <footer id="post-footer">
  
    Last modified: <span itemprop="dateModified">2017-01-10</span>
  
  
    &ndash; License: <a href="https://creativecommons.org/licenses/by-sa/4.0/" itemprop="license" title="Creative Commons Attribution-ShareAlike 4.0 International">CC-BY-SA-4.0</a>
  
  </footer>

</article>

  </div>

  <footer id="site-footer" class="footer-distributed">
  <div class="container">
    <div class="footer-right">
      <a href="/feed.xml" title="Marios Zindilis RSS Feed">
        <i class="fa fa-rss" aria-hidden="true"></i><span class="sr-only">Marios Zindilis RSS Feed</span></a>
      <a href="https://www.facebook.com/zindilis" title="Marios Zindilis Facebook">
        <i class="fa fa-facebook" aria-hidden="true"></i><span class="sr-only">Marios Zindilis Facebook</span></a>
      <a href="https://www.linkedin.com/in/zindilis" title="Marios Zindilis LinkedIn Profile">
        <i class="fa fa-linkedin" aria-hidden="true"></i><span class="sr-only">Marios Zindilis LinkedIn Profile</span></a>
      <a href="https://github.com/marios-zindilis" title="Marios Zindilis GitHub Page">
        <i class="fa fa-github" aria-hidden="true"></i><span class="sr-only">Marios Zindilis GitHub Page</span></a>
    </div>

    <div class="footer-left">
      <p class="footer-links">
        <a href="/">Home</a> · 
        <a href="/docs/">Docs</a> ·
        <a href="/projects/">Projects</a> ·
        <a href="/about/">About</a>
      </p>
      <p>Marios Zindilis</p>
    </div>
  </div>
</footer>

      <script
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"
      integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7"
      crossorigin="anonymous"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js"
      integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8"
      crossorigin="anonymous"></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js"
      integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK"
      crossorigin="anonymous"></script>
    <script type="text/javascript">
      // set padding-bottom of body to height of footer.site-footer:
      document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      // http://stackoverflow.com/a/14570614
      var observeDOM = (function(){
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver,
          eventListenerSupported = window.addEventListener;

        return function(obj, callback){
          if( MutationObserver ){
          // define a new observer
            var obs = new MutationObserver(function(mutations, observer){
              if( mutations[0].addedNodes.length || mutations[0].removedNodes.length )
              callback();
            });
            // have the observer observe foo for changes in children
            obs.observe( obj, { childList:true, subtree:true });
          }
          else if( eventListenerSupported ){
            obj.addEventListener('DOMNodeInserted', callback, false);
            obj.addEventListener('DOMNodeRemoved', callback, false);
          }
        }
      })();
      observeDOM(document.getElementById('site-footer') ,function(){
        document.body.style.marginBottom = document.getElementById("site-footer").clientHeight + "px";
      });
    </script>


  </body>
</html>
